<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fire Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f4f4f4; }
        .container { background-color: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); max-width: 600px; margin: 20px auto; }
        label { display: block; margin-bottom: 8px; font-weight: bold; }
        input[type="number"] { width: calc(100% - 22px); padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 4px; }
        button { background-color: #007bff; color: white; padding: 12px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
        button:hover { background-color: #0056b3; }
        .plot-container { margin-top: 30px; text-align: center; }
        img { max-width: 100%; height: auto; border: 1px solid #ddd; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Financial Independence Calculator</h1>
        <form action="/plot" method="post"> <label for="initialCapital">Initial Capital ($):</label>
            <input type="number" id="initialCapital" name="initialCapital" value="100000" step="0.01" required>

            <label for="monthlyContribution">Monthly Contribution ($):</label>
            <input type="number" id="monthlyContribution" name="monthlyContribution" value="500" step="0.01" required>

            <label for="annualGrowthRate">Annual Growth Rate (%):</label>
            <input type="number" id="annualGrowthRate" name="annualGrowthRate" value="7" step="0.01" required>

            <label for="currentAge">Current Age:</label>
            <input type="number" id="currentAge" name="currentAge" value="30" required>

            <label for="contributionYears">Contribution Years:</label>
            <input type="number" id="contributionYears" name="contributionYears" value="30" required>

            <label for="expectedDeathAge">Expected Death Age:</label>
            <input type="number" id="expectedDeathAge" name="expectedDeathAge" value="90" required>

            <button type="submit">Generate Plot</button>
        </form>

        <div class="plot-container">
            <img id="financialPlot" src="/plot"> </div>
    </div>

    <script>
        // Optional: JavaScript to refresh the image without full page reload
        // This is more advanced and not strictly necessary for basic functionality.
        // For simplicity, the form submitting directly to /plot will work too.
        document.querySelector('form').addEventListener('submit', function(event) {
            // Prevent default form submission if you want to handle it with AJAX
            // event.preventDefault();

            // For basic functionality, letting the form submit normally
            // to /plot (which returns an image) will display the image.
            // If you want to keep the form visible and update the image,
            // you'd typically submit with AJAX and update the 'src' attribute.
            // Example if using AJAX (requires more JS and potentially server changes for JSON response)
            // const form = event.target;
            // const formData = new FormData(form);
            // const queryParams = new URLSearchParams(formData).toString();
            // document.getElementById('financialPlot').src = '/plot?' + queryParams;
        });

        // Initial load of the plot using default values if not explicitly set
        window.onload = function() {
            // This will trigger an initial request to /plot with default values
            // (since the src is /plot without query params initially).
            // The Go handler will parse default values or error if not found.
            // Better to load an initial "how to use" page or plot with sensible defaults.
            // For now, let's just make sure the image element is there.
        };
    </script>
</body>
</html>